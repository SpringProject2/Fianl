<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="m">

	<!-- ////////// 일촌 구역 시작 ////////// -->
	
	<!-- 일촌 조회 -->
	<select id=""></select>
	
	<!-- ////////// 일촌 구역 끝 ////////// -->
	
	<!-- ////////// 일촌평 구역 시작 ////////// -->
	
	<!-- 일촌평 전체 조회 -->
	<select id="ilchon_list" resultType="main" parameterType="int">
		select * from Ilchonpyeong where ilIdx=#{idx} order by num DESC
	</select>
	
	<!-- idx에 해당하는 일촌평 갯수 구하기 -->
	<select id="countNum" resultType="int" parameterType="int">
		select count(*) from Ilchonpyeong where ilIdx=#{ilIdx}
	</select>
	
	<!-- 새 글 추가 -->
	<insert id = "ilchon_write" parameterType="main">
		insert into Ilchonpyeong values(
			#{num},
			#{ilchonpyeongText},
			#{ilIdx},
			#{ilchonSession}
		)
	</insert>
	
	<!-- ////////// 일촌평 구역 끝 ////////// -->
	
	<!-- ////////// 검색 구역 시작 ////////// -->
	
	<!-- 이름으로 친구 검색 -->
	<select id="main_search_name" resultType="signup" parameterType="String">
		select * from signup where name like '%'||#{searchValue}||'%'
	</select>
	<!-- cyworld 가입자 - ID로 친구 검색 -->
	<select id="main_search_id" resultType="signup" parameterType="String">
		select * from signup where
			(platform='cyworld' and userID like '%'||#{searchValue}||'%') or
			(platform='naver' or platform='kakao' and email like '%'||#{searchValue}||'%')
	</select>
	<!-- ////////// 검색 구역 끝 ////////// -->
	
</mapper>












